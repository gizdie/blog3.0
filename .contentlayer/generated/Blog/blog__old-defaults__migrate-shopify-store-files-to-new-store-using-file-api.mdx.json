{
  "title": "Migrate your Shopify store assets to a new store using File API",
  "date": "2023-02-25T00:00:00.000Z",
  "tags": [
    "shopify",
    "assets",
    "file-api",
    "migration",
    "graphql",
    "nodejs"
  ],
  "lastmod": "2024-09-11T00:00:00.000Z",
  "summary": "Learn how to migrate your assets from an old Shopify store to a new one in a few simple steps. This guide will show you how to retrieve and download your images using GraphQL and Node.js, and upload them to your new store with ease.",
  "images": [
    "/static/images/banners/red-and-white-stop-sign__kommumikation__WOn90Iui_08.jpeg"
  ],
  "authors": [
    "default"
  ],
  "body": {
    "raw": "\nIf you are a Shopify Developer and need to migrate all of your data from one store to a new one without the need to pay for a migration app,\nthen I believe this is the article you need to read <Twemoji emoji=\"smiling-face-with-sunglasses\" />.\n\n## Problem\n\nThe problem has been stated above. So let's see what data we have in a store and how we can migrate it to another store:\n\n- **Product**: You can download a **CSV** file containing product data and upload it to the new store.\n\n  <Twemoji emoji=\"warning\" /> With **CSV** files, information about Collections will not be\n  migrated, so you will need to recreate the Collection data.\n\n- **Theme**: Download the Zip file and upload it to the new store, and the data will remain the same.\n\n- **Blog posts & custom pages**: Use a free app on the Shopify store called [ExIm ‑ Export / Import data](​​https://apps.shopify.com/exim-export-import-pages-blogs-theme-settings) to migrate.\n\n- **Assets**: These are all the files in your store (which can be viewed in **Admin / Settings / Files**), including images, videos, and fonts. These are the assets used for theme settings, blog posts, and pages. (Product images and videos are automatically migrated when the **CSV** file is uploaded!)\n\n  And the problem I faced when migrating this asset stack was:\n\n      - My store had around ~1000 files, and I couldn't upload them manually.\n      - After uploading, I had to select the settings of the theme and page to make them work.\n\nIf done manually, this would be an exhausting task! <Twemoji emoji=\"flexed-biceps\" />\n\n## Solution\n\nMy solution here is to use the [Shopify File API](https://shopify.dev/api/admin/graphql/reference/products-and-collections/file) in conjunction with **Node.js** to download all files and upload them to the new store.\n\nThe **File API** is officially supported by Shopify in API version `2021-07` after the recent **Shopify Unite** event (information on [Shopify Developer Changelog](https://shopify.dev/changelog/file-api-is-now-available)).\n\nThe following are the steps that combine manual labor and brainpower to solve these assets <Twemoji emoji=\"face-with-tears-of-joy\" /><Twemoji emoji=\"face-with-tears-of-joy\" />\n\n### Get all file URLs with `GraphQL`\n\n<Twemoji emoji=\"keycap-1\" /> Create a **Private App**\n\nWhy create a **Private App**? Because we need to authenticate with Shopify to `request` resources in the store.\nThe simplest way is to use [Basic HTTP authentication](https://shopify.dev/apps/auth/basic-http) with a **Private App**. The steps to create a **Private App** are as follows:\n\n- Go to **Store Admin / Apps**\n- Click **Manage private apps** (at the bottom of the page) => **Create new private app**\n- Fill in **App name** and **Emergency email** in the **App details** section\n- Click **Show inactive Admin API permissions** in the **Admin API** section, scroll to the **Files** section, and select `Read access`.\n- Click => **Save** => **Create app**\n- That's it, you have created a **Private App** to authenticate with Shopify. <Twemoji emoji=\"party-popper\" />\n\n<Twemoji emoji=\"keycap-2\" /> Get the **Access Token**\n\nThe easiest way to send authenticated `requests` to Shopify is to add the request header `X-Shopify-Access-Token: {access_token}`,\nwhere `{access_token}` is the **Admin API password** of the **Private App** we just created.\n\n![private-app-password](/static/images/private-app-password.png)\n\nCopy the `password` in the **Admin API** section of the **Private App** you just created; this is the `access_token` we need for the next step.\n\n<Twemoji emoji=\"keycap-3\" /> Send a **GraphQL** request with **Postman**\n\nBecause we need to send multiple requests, it's convenient to use an HTTP Client to configure headers and copy responses (such as Postman, Postwoman, Insomnia, etc.).\nHere, I choose **Postman**. (Download link [here](https://www.postman.com/))\n\nAfter downloading, create a `POST` request like this:\n\n![postman-1](/static/images/postman-1.png)\n\nIn which:\n\n- Request URL: <code style={{ wordBreak: 'break-word' }}>https://your-store.myshopify.com/admin/api/unstable/graphql.json</code> with `unstable` as the API version supporting File API.\n\n- <Twemoji emoji=\"warning\" /> note: The `Content-Type` header must use the value `application/json`,\n  not `application/graphql` (Shopify has\n  [note](https://shopify.dev/apps/auth/basic-http#shopify-access-token) this)\n\n- The value of the `X-Shopify-Access-Token` header is the `access_token` or `password` of the **Private App** you just created.\n\nNext, switch to the **Body** tab, select **GraphQL**\n\n![postman-2](/static/images/postman-2.png)\n\nAnd add the following `query`\n\n```js showLineNumbers\n{\n  files(first: 250) {\n    edges {\n      node {\n        ... on MediaImage {\n          image {\n            originalSrc\n          }\n        }\n      }\n      cursor\n    }\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n  }\n}\n```\n\nEach `node` belongs to one of two types: [`MediaImage`](https://shopify.dev/api/admin/graphql/reference/products-and-collections/mediaimage) or [`GenericFile`](https://shopify.dev/api/admin/graphql/reference/products-and-collections/genericfile),\nwhere `GenericFile` only has a few files (mostly **Fonts**), so I'll focus on `MediaImage` only.\n\n<Twemoji emoji=\"warning\" /> Here are some important notes:\n\n- `first: 250`: is the maximum limit of Shopify for one `request`.\n- `cursor`: because of the limit, we need to create multiple requests (for example, if my store has ~1000 images, I need 4 requests). The cursor here is the **pagination** for GraphQL (similar to REST, where you use `&page=1`, `&page=2`... to request the next page).\n- `pageInfo`: It is added only to know if there is a next page or not. <Twemoji emoji=\"beaming-face-with-smiling-eyes\" />\n\nThe result will look like this: <Twemoji emoji=\"party-popper\" />\n\n![postman-3](/static/images/postman-3.png)\n\nTo `request` the next page, you need to add a `query` parameter named `after` with the value of the `cursor` of the **last element** in the `edges` array in the **response** (<Twemoji emoji=\"warning\" /> the last element!).\n\n![postman-4](/static/images/postman-4.png)\n\nThat's all <Twemoji emoji=\"grinning-face-with-sweat\" />. With 4 requests, I already have 1000 URLs of all the images in the old store!\n\n### Download files with Node.js\n\nNow, we need to download all these files and upload them to the new store.\n\nDo we need to choose the settings for this asset again when uploading to the new store <Twemoji emoji=\"thinking-face\" /> ?\n\nThe answer is no! Thanks to a very cool mechanism of Shopify!\n\n> If you upload a file with the same name as in the old store, it will automatically inherit the settings of the theme/page/blog... that were migrated <Twemoji emoji=\"exploding-head\" /><Twemoji emoji=\"exploding-head\" />.\n\nMoreover, the URL of the file obtained with **GraphQL** already contains the file name: <code style={{ wordBreak: 'break-word' }}>https://cdn.shopify.com/s/files/1/0561/2742/2636/files/fav_icon_dark_1.png?v=1618297070</code> The file name of this file is `fav_icon_dark_1.png`.\n\nNow we only need to download the 1000 files, save them with the extracted name from the URL, and upload them to the new store <Twemoji emoji=\"smiling-face-with-sunglasses\" /><Twemoji emoji=\"smiling-face-with-sunglasses\" />.\n\nWith just a few lines of `Node.js` code combined with `regex`, we can extract the name and download the file:\n\n```js showLineNumbers\nlet fs = require('fs')\nlet fetch = require('node-fetch')\nlet fileData = require('./data')\n\nasync function download(url, filename) {\n  let response = await fetch(url)\n  let buffer = await response.buffer()\n  await fs.writeFile(filename, buffer, () => {})\n}\n\nconsole.time('FILE_DOWNLOAD')\nPromise.all(\n  fileData.map(async ({ node }, ind) => {\n    let src = node?.image?.originalSrc\n    if (src) {\n      let filename = (src.match(/.*\\/files\\/(.*)\\?v=.*/) || [])[1]\n      if (filename) {\n        await download(src, `./download/${filename}`)\n      } else {\n        console.warn(`Couldn't get filename of: ${src} at index ${ind}`)\n      }\n    } else {\n      console.log(`No file at index: ${ind}`)\n    }\n  })\n).then(() => console.timeEnd('FILE_DOWNLOAD'))\n```\n\nNote that `fileData` is the array of `edges` from the above requests!\n\nThe entire `script` is in this [repository](https://github.com/hta218/shopify-file-downloader/blob/main/index.js).\n\n![file-download](/static/images/file-download.jpg)\n\nIt downloads very quickly! <Twemoji emoji=\"smiling-face-with-sunglasses\" />\n\n### Upload to the new store\n\nNo need to write any code for this step because doing it manually is the fastest way. <Twemoji emoji=\"grinning-squinting-face\" />\n\nGo to Store **Admin / Settings / Files** => click **Upload files**. Shopify only allows uploading a maximum of 200 files at a time, so uploading a few times will complete the process!\n\nAt this point, the migration process is complete <Twemoji emoji=\"party-popper\" /><Twemoji emoji=\"party-popper\" />. Check the results on the new store and good luck!\n\nHappy migrating <Twemoji emoji=\"clinking-beer-mugs\" />.\n\n### Refs\n\n- [https://shopify.dev/apps/auth/basic-http](https://shopify.dev/apps/auth/basic-http)\n- [https://www.shopify.com/partners/blog/getting-started-with-graphql](https://www.shopify.com/partners/blog/getting-started-with-graphql)\n- [https://help.shopify.com/en/manual/apps/private-apps#enable-private-app-development-from-the-shopify-admin](https://help.shopify.com/en/manual/apps/private-apps#enable-private-app-development-from-the-shopify-admin)\n",
    "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var m=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),f=(s,e)=>{for(var l in e)t(s,l,{get:e[l],enumerable:!0})},a=(s,e,l,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of B(e))!A.call(s,n)&&n!==l&&t(s,n,{get:()=>e[n],enumerable:!(h=g(e,n))||h.enumerable});return s};var D=(s,e,l)=>(l=s!=null?p(y(s)):{},a(e||!s||!s.__esModule?t(l,\"default\",{value:s,enumerable:!0}):l,s)),w=s=>a(t({},\"__esModule\",{value:!0}),s);var d=m((b,r)=>{r.exports=_jsx_runtime});var C={};f(C,{default:()=>k,frontmatter:()=>u});var i=D(d()),u={title:\"Migrate your Shopify store assets to a new store using File API\",date:\"2023-02-25\",lastmod:\"2024-09-11\",tags:[\"shopify\",\"assets\",\"file-api\",\"migration\",\"graphql\",\"nodejs\"],summary:\"Learn how to migrate your assets from an old Shopify store to a new one in a few simple steps. This guide will show you how to retrieve and download your images using GraphQL and Node.js, and upload them to your new store with ease.\",images:[\"/static/images/banners/red-and-white-stop-sign__kommumikation__WOn90Iui_08.jpeg\"],authors:[\"default\"]};function o(s){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...s.components},{Image:l,Twemoji:h}=e;return l||c(\"Image\",!0),h||c(\"Twemoji\",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:[\"If you are a Shopify Developer and need to migrate all of your data from one store to a new one without the need to pay for a migration app, then I believe this is the article you need to read \",(0,i.jsx)(h,{emoji:\"smiling-face-with-sunglasses\"}),\".\"]}),(0,i.jsxs)(e.h2,{className:\"content-header\",id:\"problem\",children:[(0,i.jsx)(e.a,{href:\"#problem\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Problem\"]}),(0,i.jsx)(e.p,{children:\"The problem has been stated above. So let's see what data we have in a store and how we can migrate it to another store:\"}),(0,i.jsxs)(e.ul,{children:[(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"Product\"}),\": You can download a \",(0,i.jsx)(e.strong,{children:\"CSV\"}),\" file containing product data and upload it to the new store.\"]}),(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"warning\"}),\"With \",(0,i.jsx)(e.strong,{children:\"CSV\"}),\" files, information about Collections will not be migrated, so you will need to recreate the Collection data.\"]})]}),(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"Theme\"}),\": Download the Zip file and upload it to the new store, and the data will remain the same.\"]})}),(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"Blog posts & custom pages\"}),\": Use a free app on the Shopify store called \",(0,i.jsx)(e.a,{href:\"%E2%80%8B%E2%80%8Bhttps://apps.shopify.com/exim-export-import-pages-blogs-theme-settings\",children:\"ExIm \\u2011 Export / Import data\"}),\" to migrate.\"]})}),(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"Assets\"}),\": These are all the files in your store (which can be viewed in \",(0,i.jsx)(e.strong,{children:\"Admin / Settings / Files\"}),\"), including images, videos, and fonts. These are the assets used for theme settings, blog posts, and pages. (Product images and videos are automatically migrated when the \",(0,i.jsx)(e.strong,{children:\"CSV\"}),\" file is uploaded!)\"]}),(0,i.jsx)(e.p,{children:\"And the problem I faced when migrating this asset stack was:\"}),(0,i.jsxs)(e.ul,{children:[(0,i.jsx)(e.li,{children:\"My store had around ~1000 files, and I couldn't upload them manually.\"}),(0,i.jsx)(e.li,{children:\"After uploading, I had to select the settings of the theme and page to make them work.\"})]})]})]}),(0,i.jsxs)(e.p,{children:[\"If done manually, this would be an exhausting task! \",(0,i.jsx)(h,{emoji:\"flexed-biceps\"})]}),(0,i.jsxs)(e.h2,{className:\"content-header\",id:\"solution\",children:[(0,i.jsx)(e.a,{href:\"#solution\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Solution\"]}),(0,i.jsxs)(e.p,{children:[\"My solution here is to use the \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/api/admin/graphql/reference/products-and-collections/file\",children:\"Shopify File API\"}),\" in conjunction with \",(0,i.jsx)(e.strong,{children:\"Node.js\"}),\" to download all files and upload them to the new store.\"]}),(0,i.jsxs)(e.p,{children:[\"The \",(0,i.jsx)(e.strong,{children:\"File API\"}),\" is officially supported by Shopify in API version \",(0,i.jsx)(e.code,{children:\"2021-07\"}),\" after the recent \",(0,i.jsx)(e.strong,{children:\"Shopify Unite\"}),\" event (information on \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/changelog/file-api-is-now-available\",children:\"Shopify Developer Changelog\"}),\").\"]}),(0,i.jsxs)(e.p,{children:[\"The following are the steps that combine manual labor and brainpower to solve these assets \",(0,i.jsx)(h,{emoji:\"face-with-tears-of-joy\"}),(0,i.jsx)(h,{emoji:\"face-with-tears-of-joy\"})]}),(0,i.jsxs)(e.h3,{className:\"content-header\",id:\"get-all-file-urls-with-graphql\",children:[(0,i.jsx)(e.a,{href:\"#get-all-file-urls-with-graphql\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Get all file URLs with \",(0,i.jsx)(e.code,{children:\"GraphQL\"})]}),(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"keycap-1\"}),\"Create a \",(0,i.jsx)(e.strong,{children:\"Private App\"})]}),(0,i.jsxs)(e.p,{children:[\"Why create a \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\"? Because we need to authenticate with Shopify to \",(0,i.jsx)(e.code,{children:\"request\"}),\" resources in the store. The simplest way is to use \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/apps/auth/basic-http\",children:\"Basic HTTP authentication\"}),\" with a \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\". The steps to create a \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\" are as follows:\"]}),(0,i.jsxs)(e.ul,{children:[(0,i.jsxs)(e.li,{children:[\"Go to \",(0,i.jsx)(e.strong,{children:\"Store Admin / Apps\"})]}),(0,i.jsxs)(e.li,{children:[\"Click \",(0,i.jsx)(e.strong,{children:\"Manage private apps\"}),\" (at the bottom of the page) => \",(0,i.jsx)(e.strong,{children:\"Create new private app\"})]}),(0,i.jsxs)(e.li,{children:[\"Fill in \",(0,i.jsx)(e.strong,{children:\"App name\"}),\" and \",(0,i.jsx)(e.strong,{children:\"Emergency email\"}),\" in the \",(0,i.jsx)(e.strong,{children:\"App details\"}),\" section\"]}),(0,i.jsxs)(e.li,{children:[\"Click \",(0,i.jsx)(e.strong,{children:\"Show inactive Admin API permissions\"}),\" in the \",(0,i.jsx)(e.strong,{children:\"Admin API\"}),\" section, scroll to the \",(0,i.jsx)(e.strong,{children:\"Files\"}),\" section, and select \",(0,i.jsx)(e.code,{children:\"Read access\"}),\".\"]}),(0,i.jsxs)(e.li,{children:[\"Click => \",(0,i.jsx)(e.strong,{children:\"Save\"}),\" => \",(0,i.jsx)(e.strong,{children:\"Create app\"})]}),(0,i.jsxs)(e.li,{children:[\"That's it, you have created a \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\" to authenticate with Shopify. \",(0,i.jsx)(h,{emoji:\"party-popper\"})]})]}),(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"keycap-2\"}),\"Get the \",(0,i.jsx)(e.strong,{children:\"Access Token\"})]}),(0,i.jsxs)(e.p,{children:[\"The easiest way to send authenticated \",(0,i.jsx)(e.code,{children:\"requests\"}),\" to Shopify is to add the request header \",(0,i.jsx)(e.code,{children:\"X-Shopify-Access-Token: {access_token}\"}),\", where \",(0,i.jsx)(e.code,{children:\"{access_token}\"}),\" is the \",(0,i.jsx)(e.strong,{children:\"Admin API password\"}),\" of the \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\" we just created.\"]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"private-app-password\",src:\"/static/images/private-app-password.png\",width:\"1045\",height:\"506\"})}),(0,i.jsxs)(e.p,{children:[\"Copy the \",(0,i.jsx)(e.code,{children:\"password\"}),\" in the \",(0,i.jsx)(e.strong,{children:\"Admin API\"}),\" section of the \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\" you just created; this is the \",(0,i.jsx)(e.code,{children:\"access_token\"}),\" we need for the next step.\"]}),(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"keycap-3\"}),\"Send a \",(0,i.jsx)(e.strong,{children:\"GraphQL\"}),\" request with \",(0,i.jsx)(e.strong,{children:\"Postman\"})]}),(0,i.jsxs)(e.p,{children:[\"Because we need to send multiple requests, it's convenient to use an HTTP Client to configure headers and copy responses (such as Postman, Postwoman, Insomnia, etc.). Here, I choose \",(0,i.jsx)(e.strong,{children:\"Postman\"}),\". (Download link \",(0,i.jsx)(e.a,{href:\"https://www.postman.com/\",children:\"here\"}),\")\"]}),(0,i.jsxs)(e.p,{children:[\"After downloading, create a \",(0,i.jsx)(e.code,{children:\"POST\"}),\" request like this:\"]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"postman-1\",src:\"/static/images/postman-1.png\",width:\"2210\",height:\"732\"})}),(0,i.jsx)(e.p,{children:\"In which:\"}),(0,i.jsxs)(e.ul,{children:[(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.p,{children:[\"Request URL: \",(0,i.jsx)(\"code\",{style:{wordBreak:\"break-word\"},children:(0,i.jsx)(e.a,{href:\"https://your-store.myshopify.com/admin/api/unstable/graphql.json\",children:\"https://your-store.myshopify.com/admin/api/unstable/graphql.json\"})}),\" with \",(0,i.jsx)(e.code,{children:\"unstable\"}),\" as the API version supporting File API.\"]})}),(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"warning\"}),\"note: The \",(0,i.jsx)(e.code,{children:\"Content-Type\"}),\" header must use the value \",(0,i.jsx)(e.code,{children:\"application/json\"}),\", not \",(0,i.jsx)(e.code,{children:\"application/graphql\"}),\" (Shopify has \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/apps/auth/basic-http#shopify-access-token\",children:\"note\"}),\" this)\"]})}),(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.p,{children:[\"The value of the \",(0,i.jsx)(e.code,{children:\"X-Shopify-Access-Token\"}),\" header is the \",(0,i.jsx)(e.code,{children:\"access_token\"}),\" or \",(0,i.jsx)(e.code,{children:\"password\"}),\" of the \",(0,i.jsx)(e.strong,{children:\"Private App\"}),\" you just created.\"]})})]}),(0,i.jsxs)(e.p,{children:[\"Next, switch to the \",(0,i.jsx)(e.strong,{children:\"Body\"}),\" tab, select \",(0,i.jsx)(e.strong,{children:\"GraphQL\"})]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"postman-2\",src:\"/static/images/postman-2.png\",width:\"1540\",height:\"1096\"})}),(0,i.jsxs)(e.p,{children:[\"And add the following \",(0,i.jsx)(e.code,{children:\"query\"})]}),(0,i.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,i.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,i.jsxs)(e.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"{\"})}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"  files\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"first\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#D33682\"},children:\"250\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"    edges\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      node\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"        ...\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" on\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" MediaImage\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"          image\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"            originalSrc\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"          }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"        }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      cursor\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    }\"})}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"    pageInfo\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      hasNextPage\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      hasPreviousPage\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,i.jsxs)(e.p,{children:[\"Each \",(0,i.jsx)(e.code,{children:\"node\"}),\" belongs to one of two types: \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/api/admin/graphql/reference/products-and-collections/mediaimage\",children:(0,i.jsx)(e.code,{children:\"MediaImage\"})}),\" or \",(0,i.jsx)(e.a,{href:\"https://shopify.dev/api/admin/graphql/reference/products-and-collections/genericfile\",children:(0,i.jsx)(e.code,{children:\"GenericFile\"})}),\", where \",(0,i.jsx)(e.code,{children:\"GenericFile\"}),\" only has a few files (mostly \",(0,i.jsx)(e.strong,{children:\"Fonts\"}),\"), so I'll focus on \",(0,i.jsx)(e.code,{children:\"MediaImage\"}),\" only.\"]}),(0,i.jsxs)(e.p,{children:[(0,i.jsx)(h,{emoji:\"warning\"}),\"Here are some important notes:\"]}),(0,i.jsxs)(e.ul,{children:[(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:\"first: 250\"}),\": is the maximum limit of Shopify for one \",(0,i.jsx)(e.code,{children:\"request\"}),\".\"]}),(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:\"cursor\"}),\": because of the limit, we need to create multiple requests (for example, if my store has ~1000 images, I need 4 requests). The cursor here is the \",(0,i.jsx)(e.strong,{children:\"pagination\"}),\" for GraphQL (similar to REST, where you use \",(0,i.jsx)(e.code,{children:\"&page=1\"}),\", \",(0,i.jsx)(e.code,{children:\"&page=2\"}),\"... to request the next page).\"]}),(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:\"pageInfo\"}),\": It is added only to know if there is a next page or not. \",(0,i.jsx)(h,{emoji:\"beaming-face-with-smiling-eyes\"})]})]}),(0,i.jsxs)(e.p,{children:[\"The result will look like this: \",(0,i.jsx)(h,{emoji:\"party-popper\"})]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"postman-3\",src:\"/static/images/postman-3.png\",width:\"840\",height:\"651\"})}),(0,i.jsxs)(e.p,{children:[\"To \",(0,i.jsx)(e.code,{children:\"request\"}),\" the next page, you need to add a \",(0,i.jsx)(e.code,{children:\"query\"}),\" parameter named \",(0,i.jsx)(e.code,{children:\"after\"}),\" with the value of the \",(0,i.jsx)(e.code,{children:\"cursor\"}),\" of the \",(0,i.jsx)(e.strong,{children:\"last element\"}),\" in the \",(0,i.jsx)(e.code,{children:\"edges\"}),\" array in the \",(0,i.jsx)(e.strong,{children:\"response\"}),\" (\",(0,i.jsx)(h,{emoji:\"warning\"}),\" the last element!).\"]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"postman-4\",src:\"/static/images/postman-4.png\",width:\"1087\",height:\"210\"})}),(0,i.jsxs)(e.p,{children:[\"That's all \",(0,i.jsx)(h,{emoji:\"grinning-face-with-sweat\"}),\". With 4 requests, I already have 1000 URLs of all the images in the old store!\"]}),(0,i.jsxs)(e.h3,{className:\"content-header\",id:\"download-files-with-nodejs\",children:[(0,i.jsx)(e.a,{href:\"#download-files-with-nodejs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Download files with Node.js\"]}),(0,i.jsx)(e.p,{children:\"Now, we need to download all these files and upload them to the new store.\"}),(0,i.jsxs)(e.p,{children:[\"Do we need to choose the settings for this asset again when uploading to the new store \",(0,i.jsx)(h,{emoji:\"thinking-face\"}),\"?\"]}),(0,i.jsx)(e.p,{children:\"The answer is no! Thanks to a very cool mechanism of Shopify!\"}),(0,i.jsx)(e.blockquote,{children:(0,i.jsxs)(e.p,{children:[\"If you upload a file with the same name as in the old store, it will automatically inherit the settings of the theme/page/blog... that were migrated \",(0,i.jsx)(h,{emoji:\"exploding-head\"}),(0,i.jsx)(h,{emoji:\"exploding-head\"}),\".\"]})}),(0,i.jsxs)(e.p,{children:[\"Moreover, the URL of the file obtained with \",(0,i.jsx)(e.strong,{children:\"GraphQL\"}),\" already contains the file name: \",(0,i.jsx)(\"code\",{style:{wordBreak:\"break-word\"},children:(0,i.jsx)(e.a,{href:\"https://cdn.shopify.com/s/files/1/0561/2742/2636/files/fav_icon_dark_1.png?v=1618297070\",children:\"https://cdn.shopify.com/s/files/1/0561/2742/2636/files/fav_icon_dark_1.png?v=1618297070\"})}),\" The file name of this file is \",(0,i.jsx)(e.code,{children:\"fav_icon_dark_1.png\"}),\".\"]}),(0,i.jsxs)(e.p,{children:[\"Now we only need to download the 1000 files, save them with the extracted name from the URL, and upload them to the new store \",(0,i.jsx)(h,{emoji:\"smiling-face-with-sunglasses\"}),(0,i.jsx)(h,{emoji:\"smiling-face-with-sunglasses\"}),\".\"]}),(0,i.jsxs)(e.p,{children:[\"With just a few lines of \",(0,i.jsx)(e.code,{children:\"Node.js\"}),\" code combined with \",(0,i.jsx)(e.code,{children:\"regex\"}),\", we can extract the name and download the file:\"]}),(0,i.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,i.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,i.jsxs)(e.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" fs\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" require\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'fs'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" require\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'node-fetch'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" fileData\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" require\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'./data'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"async\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" download\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"url\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"filename\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" response\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" await\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"url\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" buffer\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" await\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" response\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"buffer\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  await\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" fs\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"writeFile\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"filename\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"buffer\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", () \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {})\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"console\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"time\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'FILE_DOWNLOAD'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#859900\"},children:\"Promise\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"all\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  fileData\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"map\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"async\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" ({ \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"node\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }, \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"ind\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"    let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" node\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"?.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"image\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"?.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"originalSrc\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    if\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"      let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" filename\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"match\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\"/\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#CB4B16\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"*\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#8DDB8C\",\"--shiki-dark-font-weight\":\"bold\",\"--shiki-light\":\"#CB4B16\",\"--shiki-light-font-weight\":\"inherit\"},children:\"\\\\/\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\"files\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#8DDB8C\",\"--shiki-dark-font-weight\":\"bold\",\"--shiki-light\":\"#CB4B16\",\"--shiki-light-font-weight\":\"inherit\"},children:\"\\\\/\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#CB4B16\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"*\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\")\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#8DDB8C\",\"--shiki-dark-font-weight\":\"bold\",\"--shiki-light\":\"#CB4B16\",\"--shiki-light-font-weight\":\"inherit\"},children:\"\\\\?\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\"v=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#CB4B16\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"*\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#DC322F\"},children:\"/\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"||\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" [])[\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#D33682\"},children:\"1\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"]\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      if\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"filename\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"        await\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" download\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`./download/${\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"filename\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      } \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"else\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"        console\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"warn\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`Couldn't get filename of: ${\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"} at index ${\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"ind\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      }\"})}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    } \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"else\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      console\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"log\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`No file at index: ${\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"ind\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    }\"})}),`\n`,(0,i.jsx)(e.span,{\"data-line\":\"\",children:(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  })\"})}),`\n`,(0,i.jsxs)(e.span,{\"data-line\":\"\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\").\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" console\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"timeEnd\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'FILE_DOWNLOAD'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"))\"})]})]})})}),(0,i.jsxs)(e.p,{children:[\"Note that \",(0,i.jsx)(e.code,{children:\"fileData\"}),\" is the array of \",(0,i.jsx)(e.code,{children:\"edges\"}),\" from the above requests!\"]}),(0,i.jsxs)(e.p,{children:[\"The entire \",(0,i.jsx)(e.code,{children:\"script\"}),\" is in this \",(0,i.jsx)(e.a,{href:\"https://github.com/hta218/shopify-file-downloader/blob/main/index.js\",children:\"repository\"}),\".\"]}),(0,i.jsx)(e.div,{children:(0,i.jsx)(l,{alt:\"file-download\",src:\"/static/images/file-download.jpg\",width:\"1209\",height:\"712\"})}),(0,i.jsxs)(e.p,{children:[\"It downloads very quickly! \",(0,i.jsx)(h,{emoji:\"smiling-face-with-sunglasses\"})]}),(0,i.jsxs)(e.h3,{className:\"content-header\",id:\"upload-to-the-new-store\",children:[(0,i.jsx)(e.a,{href:\"#upload-to-the-new-store\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Upload to the new store\"]}),(0,i.jsxs)(e.p,{children:[\"No need to write any code for this step because doing it manually is the fastest way. \",(0,i.jsx)(h,{emoji:\"grinning-squinting-face\"})]}),(0,i.jsxs)(e.p,{children:[\"Go to Store \",(0,i.jsx)(e.strong,{children:\"Admin / Settings / Files\"}),\" => click \",(0,i.jsx)(e.strong,{children:\"Upload files\"}),\". Shopify only allows uploading a maximum of 200 files at a time, so uploading a few times will complete the process!\"]}),(0,i.jsxs)(e.p,{children:[\"At this point, the migration process is complete \",(0,i.jsx)(h,{emoji:\"party-popper\"}),(0,i.jsx)(h,{emoji:\"party-popper\"}),\". Check the results on the new store and good luck!\"]}),(0,i.jsxs)(e.p,{children:[\"Happy migrating \",(0,i.jsx)(h,{emoji:\"clinking-beer-mugs\"}),\".\"]}),(0,i.jsxs)(e.h3,{className:\"content-header\",id:\"refs\",children:[(0,i.jsx)(e.a,{href:\"#refs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.span,{className:\"content-header-link\",children:(0,i.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,i.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,i.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Refs\"]}),(0,i.jsxs)(e.ul,{children:[(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\"https://shopify.dev/apps/auth/basic-http\",children:\"https://shopify.dev/apps/auth/basic-http\"})}),(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\"https://www.shopify.com/partners/blog/getting-started-with-graphql\",children:\"https://www.shopify.com/partners/blog/getting-started-with-graphql\"})}),(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\"https://help.shopify.com/en/manual/apps/private-apps#enable-private-app-development-from-the-shopify-admin\",children:\"https://help.shopify.com/en/manual/apps/private-apps#enable-private-app-development-from-the-shopify-admin\"})})]})]})}function k(s={}){let{wrapper:e}=s.components||{};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(o,{...s})}):o(s)}function c(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(C);})();\n;return Component;"
  },
  "_id": "blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api.mdx",
  "_raw": {
    "sourceFilePath": "blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api.mdx",
    "sourceFileName": "migrate-shopify-store-files-to-new-store-using-file-api.mdx",
    "sourceFileDir": "blog/old-defaults",
    "contentType": "mdx",
    "flattenedPath": "blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api"
  },
  "type": "Blog",
  "readingTime": {
    "text": "7 min read",
    "minutes": 6.16,
    "time": 369600,
    "words": 1232
  },
  "slug": "old-defaults/migrate-shopify-store-files-to-new-store-using-file-api",
  "path": "blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api",
  "filePath": "blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api.mdx",
  "toc": [
    {
      "value": "Problem",
      "url": "#problem",
      "depth": 2
    },
    {
      "value": "Solution",
      "url": "#solution",
      "depth": 2
    },
    {
      "value": "Get all file URLs with GraphQL",
      "url": "#get-all-file-urls-with-graphql",
      "depth": 3
    },
    {
      "value": "Download files with Node.js",
      "url": "#download-files-with-nodejs",
      "depth": 3
    },
    {
      "value": "Upload to the new store",
      "url": "#upload-to-the-new-store",
      "depth": 3
    },
    {
      "value": "Refs",
      "url": "#refs",
      "depth": 3
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Migrate your Shopify store assets to a new store using File API",
    "datePublished": "2023-02-25T00:00:00.000Z",
    "dateModified": "2024-09-11T00:00:00.000Z",
    "description": "Learn how to migrate your assets from an old Shopify store to a new one in a few simple steps. This guide will show you how to retrieve and download your images using GraphQL and Node.js, and upload them to your new store with ease.",
    "image": "/static/images/banners/red-and-white-stop-sign__kommumikation__WOn90Iui_08.jpeg",
    "url": "https://www.rustyyow.com/blog/old-defaults/migrate-shopify-store-files-to-new-store-using-file-api"
  }
}