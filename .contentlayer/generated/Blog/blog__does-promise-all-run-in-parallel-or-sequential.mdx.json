{
  "title": "Does JavaScript Promise.all() run in parallel or sequential?",
  "date": "2023-09-04T00:00:00.000Z",
  "tags": [
    "javascript",
    "promise",
    "parallel",
    "sequential",
    "concurrently"
  ],
  "lastmod": "2024-11-11T00:00:00.000Z",
  "summary": "JavaScript is a single-threaded programming language, so it can't run multiple things at the same time, Promise.all() actually runs promises concurrently, not in parallel!. Let's dive in to see how it works.",
  "images": [
    "/static/images/banners/long-straight-road-with-trees-on-the-side__karsten_wuerth__rafblRbne3o.jpeg"
  ],
  "authors": [
    "default"
  ],
  "body": {
    "raw": "\nLet's say you have a list of async tasks (each return a **Promise**).\n\n```js:promises.js showLineNumbers\nlet promise1 = async function () {\n  /* ... */\n}\nlet promise2 = async function () {\n  /* ... */\n}\nlet promise3 = async function () {\n  /* ... */\n}\n```\n\nWhat would you choose to run them?\n\nAwaiting each promise one by one:\n\n```js showLineNumbers\nawait promise1()\nawait promise2()\nawait promise3()\n// do other stuff\n```\n\nOr run them all at once:\n\n```js showLineNumbers\nawait Promise.all([promise1(), promise2(), promise3()])\n// do other stuff\n```\n\nThe first approach is running them **sequentially**, one after another. It means that the next promise will start only after the previous one is resolved.\n\nLike this:\n\n```js:promise-hell.js showLineNumbers\npromise1().then(() => {\n  promise2().then(() => {\n    promise3().then(() => {\n      // do other stuff\n    })\n  })\n})\n```\n\nThe second approach is well-known as running them in **\"parallel\"**, meaning that all promises will start at the same time.\nIt's useful when you don't need to wait for the previous promise to be resolved before starting the next one.\n\nBut does it really run in parallel (or all at once)? <Twemoji emoji=\"thinking-face\" />\n\nThe answer is no. JavaScript is single-threaded programming language, so it can't run multiple things at the exact same time (except for some circumstances such as [web workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers).)\n`Promise.all()` actually runs them concurrently, not in parallel!\n\nWhat's the difference?\n\n## Concurrent programming vs Parallel programming\n\n> TL;DR: Concurrent programming is about dealing with a lot of things at once, while parallel programming is about doing a lot of things at once.\n\nSee also this excellent explanation from [Haskell wiki](https://wiki.haskell.org/Parallelism_vs._Concurrency).\n\nA dead-simple example for a 9-year-old kid:\n\n- **Concurrency**: 2 lines of customers ordering food from a single cashier (lines take turns ordering).\n- **Parallelism**: 2 lines of customers ordering food at the same time from 2 cashiers.\n\nAs so, what `Promise.all()` does is, it adds the promises to an event loop queue and calls them all together.\nBut it waits for each one to resolve before moving on.\n`Promise.all` will stop if the first promise rejects, unless you handle the error yourself (e.g. with `.catch()`).\n\nThat's the major difference between concurrent and parallel, with _concurrent execution_, promises run one after another but don't have to wait for previous ones to end. They make progress at the same time.\nIn contrast, _parallel execution_ runs promises at the exact same time in separate processes.\nThis allows them to progress completely separately at their own speed.\n\n## Conclusion\n\nThe answer for the question in the title is: `Promise.all()` runs concurrently, all promises execute almost at the same time, but not in parallel.\n\nIf you have a list promises that don't depend on each other, you can run them concurrently (or parallel-like):\n\n```js:concurrently.js showLineNumbers\nawait Promise.all([promise1(), promise2(), promise3()])\n// or\nawait Promise.all(\n  items.map(async (item) => {\n    await doSomething(item)\n  })\n)\n```\n\nOr sequentially:\n\n```js:sequentially.js showLineNumbers\nfor (let item of items) {\n  await doSomething(item)\n}\n```\n\n## References\n\n- [`Promise.all()` documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)\n- [Parallelism vs. Concurrency](https://wiki.haskell.org/Parallelism_vs._Concurrency)\n- [JavaScript Event Loop structure](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop)\n\nHappy promise-ing! <Twemoji emoji=\"clinking-beer-mugs\" />\n",
    "code": "var Component=(()=>{var g=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(s,i)=>()=>(i||s((i={exports:{}}).exports,i),i.exports),D=(s,i)=>{for(var h in i)a(s,h,{get:i[h],enumerable:!0})},n=(s,i,h,l)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let t of m(i))!B.call(s,t)&&t!==h&&a(s,t,{get:()=>i[t],enumerable:!(l=p(i,t))||l.enumerable});return s};var f=(s,i,h)=>(h=s!=null?g(y(s)):{},n(i||!s||!s.__esModule?a(h,\"default\",{value:s,enumerable:!0}):h,s)),A=s=>n(a({},\"__esModule\",{value:!0}),s);var d=u((F,r)=>{r.exports=_jsx_runtime});var C={};D(C,{default:()=>o,frontmatter:()=>w});var e=f(d()),w={title:\"Does JavaScript Promise.all() run in parallel or sequential?\",date:\"2023-09-04\",lastmod:\"2024-11-11\",tags:[\"javascript\",\"promise\",\"parallel\",\"sequential\",\"concurrently\"],summary:\"JavaScript is a single-threaded programming language, so it can't run multiple things at the same time, Promise.all() actually runs promises concurrently, not in parallel!. Let's dive in to see how it works.\",images:[\"/static/images/banners/long-straight-road-with-trees-on-the-side__karsten_wuerth__rafblRbne3o.jpeg\"],authors:[\"default\"]};function k(s){let i={a:\"a\",blockquote:\"blockquote\",code:\"code\",em:\"em\",figure:\"figure\",h2:\"h2\",li:\"li\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...s.components},{CodeTitle:h,Twemoji:l}=i;return h||c(\"CodeTitle\",!0),l||c(\"Twemoji\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i.p,{children:[\"Let's say you have a list of async tasks (each return a \",(0,e.jsx)(i.strong,{children:\"Promise\"}),\").\"]}),(0,e.jsx)(h,{lang:\"js\",title:\"promises.js\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise1\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" async\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" () {\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"  /* ... */\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise2\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" async\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" () {\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"  /* ... */\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise3\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" async\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" () {\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"  /* ... */\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,e.jsx)(i.p,{children:\"What would you choose to run them?\"}),(0,e.jsx)(i.p,{children:\"Awaiting each promise one by one:\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise1\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise2\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" promise3\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"// do other stuff\"})})]})})}),(0,e.jsx)(i.p,{children:\"Or run them all at once:\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#859900\"},children:\" Promise\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"all\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"([\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise1\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(), \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise2\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(), \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise3\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()])\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"// do other stuff\"})})]})})}),(0,e.jsxs)(i.p,{children:[\"The first approach is running them \",(0,e.jsx)(i.strong,{children:\"sequentially\"}),\", one after another. It means that the next promise will start only after the previous one is resolved.\"]}),(0,e.jsx)(i.p,{children:\"Like this:\"}),(0,e.jsx)(h,{lang:\"js\",title:\"promise-hell.js\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise1\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"().\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"  promise2\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"().\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"    promise3\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"().\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"      // do other stuff\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    })\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  })\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"})\"})})]})})}),(0,e.jsxs)(i.p,{children:[\"The second approach is well-known as running them in \",(0,e.jsx)(i.strong,{children:'\"parallel\"'}),\", meaning that all promises will start at the same time. It's useful when you don't need to wait for the previous promise to be resolved before starting the next one.\"]}),(0,e.jsxs)(i.p,{children:[\"But does it really run in parallel (or all at once)? \",(0,e.jsx)(l,{emoji:\"thinking-face\"})]}),(0,e.jsxs)(i.p,{children:[\"The answer is no. JavaScript is single-threaded programming language, so it can't run multiple things at the exact same time (except for some circumstances such as \",(0,e.jsx)(i.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\",children:\"web workers\"}),\".) \",(0,e.jsx)(i.code,{children:\"Promise.all()\"}),\" actually runs them concurrently, not in parallel!\"]}),(0,e.jsx)(i.p,{children:\"What's the difference?\"}),(0,e.jsxs)(i.h2,{className:\"content-header\",id:\"concurrent-programming-vs-parallel-programming\",children:[(0,e.jsx)(i.a,{href:\"#concurrent-programming-vs-parallel-programming\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(i.span,{className:\"content-header-link\",children:(0,e.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Concurrent programming vs Parallel programming\"]}),(0,e.jsx)(i.blockquote,{children:(0,e.jsx)(i.p,{children:\"TL;DR: Concurrent programming is about dealing with a lot of things at once, while parallel programming is about doing a lot of things at once.\"})}),(0,e.jsxs)(i.p,{children:[\"See also this excellent explanation from \",(0,e.jsx)(i.a,{href:\"https://wiki.haskell.org/Parallelism_vs._Concurrency\",children:\"Haskell wiki\"}),\".\"]}),(0,e.jsx)(i.p,{children:\"A dead-simple example for a 9-year-old kid:\"}),(0,e.jsxs)(i.ul,{children:[(0,e.jsxs)(i.li,{children:[(0,e.jsx)(i.strong,{children:\"Concurrency\"}),\": 2 lines of customers ordering food from a single cashier (lines take turns ordering).\"]}),(0,e.jsxs)(i.li,{children:[(0,e.jsx)(i.strong,{children:\"Parallelism\"}),\": 2 lines of customers ordering food at the same time from 2 cashiers.\"]})]}),(0,e.jsxs)(i.p,{children:[\"As so, what \",(0,e.jsx)(i.code,{children:\"Promise.all()\"}),\" does is, it adds the promises to an event loop queue and calls them all together. But it waits for each one to resolve before moving on. \",(0,e.jsx)(i.code,{children:\"Promise.all\"}),\" will stop if the first promise rejects, unless you handle the error yourself (e.g. with \",(0,e.jsx)(i.code,{children:\".catch()\"}),\").\"]}),(0,e.jsxs)(i.p,{children:[\"That's the major difference between concurrent and parallel, with \",(0,e.jsx)(i.em,{children:\"concurrent execution\"}),\", promises run one after another but don't have to wait for previous ones to end. They make progress at the same time. In contrast, \",(0,e.jsx)(i.em,{children:\"parallel execution\"}),\" runs promises at the exact same time in separate processes. This allows them to progress completely separately at their own speed.\"]}),(0,e.jsxs)(i.h2,{className:\"content-header\",id:\"conclusion\",children:[(0,e.jsx)(i.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(i.span,{className:\"content-header-link\",children:(0,e.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Conclusion\"]}),(0,e.jsxs)(i.p,{children:[\"The answer for the question in the title is: \",(0,e.jsx)(i.code,{children:\"Promise.all()\"}),\" runs concurrently, all promises execute almost at the same time, but not in parallel.\"]}),(0,e.jsx)(i.p,{children:\"If you have a list promises that don't depend on each other, you can run them concurrently (or parallel-like):\"}),(0,e.jsx)(h,{lang:\"js\",title:\"concurrently.js\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#859900\"},children:\" Promise\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"all\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"([\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise1\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(), \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise2\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(), \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"promise3\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()])\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"// or\"})}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#859900\"},children:\" Promise\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"all\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  items\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"map\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"async\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"item\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" doSomething\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"item\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  })\"})}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})})]})})}),(0,e.jsx)(i.p,{children:\"Or sequentially:\"}),(0,e.jsx)(h,{lang:\"js\",title:\"sequentially.js\"}),(0,e.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,e.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"for\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" item\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" of\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" items\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(i.span,{\"data-line\":\"\",children:[(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  await\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" doSomething\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"item\"}),(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,e.jsx)(i.span,{\"data-line\":\"\",children:(0,e.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,e.jsxs)(i.h2,{className:\"content-header\",id:\"references\",children:[(0,e.jsx)(i.a,{href:\"#references\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(i.span,{className:\"content-header-link\",children:(0,e.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"References\"]}),(0,e.jsxs)(i.ul,{children:[(0,e.jsx)(i.li,{children:(0,e.jsxs)(i.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\",children:[(0,e.jsx)(i.code,{children:\"Promise.all()\"}),\" documentation\"]})}),(0,e.jsx)(i.li,{children:(0,e.jsx)(i.a,{href:\"https://wiki.haskell.org/Parallelism_vs._Concurrency\",children:\"Parallelism vs. Concurrency\"})}),(0,e.jsx)(i.li,{children:(0,e.jsx)(i.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop\",children:\"JavaScript Event Loop structure\"})})]}),(0,e.jsxs)(i.p,{children:[\"Happy promise-ing! \",(0,e.jsx)(l,{emoji:\"clinking-beer-mugs\"})]})]})}function o(s={}){let{wrapper:i}=s.components||{};return i?(0,e.jsx)(i,{...s,children:(0,e.jsx)(k,{...s})}):k(s)}function c(s,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return A(C);})();\n;return Component;"
  },
  "_id": "blog/does-promise-all-run-in-parallel-or-sequential.mdx",
  "_raw": {
    "sourceFilePath": "blog/does-promise-all-run-in-parallel-or-sequential.mdx",
    "sourceFileName": "does-promise-all-run-in-parallel-or-sequential.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/does-promise-all-run-in-parallel-or-sequential"
  },
  "type": "Blog",
  "readingTime": {
    "text": "3 min read",
    "minutes": 2.56,
    "time": 153600,
    "words": 512
  },
  "slug": "does-promise-all-run-in-parallel-or-sequential",
  "path": "blog/does-promise-all-run-in-parallel-or-sequential",
  "filePath": "blog/does-promise-all-run-in-parallel-or-sequential.mdx",
  "toc": [
    {
      "value": "Concurrent programming vs Parallel programming",
      "url": "#concurrent-programming-vs-parallel-programming",
      "depth": 2
    },
    {
      "value": "Conclusion",
      "url": "#conclusion",
      "depth": 2
    },
    {
      "value": "References",
      "url": "#references",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Does JavaScript Promise.all() run in parallel or sequential?",
    "datePublished": "2023-09-04T00:00:00.000Z",
    "dateModified": "2024-11-11T00:00:00.000Z",
    "description": "JavaScript is a single-threaded programming language, so it can't run multiple things at the same time, Promise.all() actually runs promises concurrently, not in parallel!. Let's dive in to see how it works.",
    "image": "/static/images/banners/long-straight-road-with-trees-on-the-side__karsten_wuerth__rafblRbne3o.jpeg",
    "url": "https://www.leohuynh.dev/blog/does-promise-all-run-in-parallel-or-sequential"
  }
}