{
  "heading": "Display Spotify currently playing track",
  "title": "How to work with Spotify's API to display currently playing track on a website?",
  "icon": "Spotify",
  "date": "2023-04-06T00:00:00.000Z",
  "tags": [
    "spotify",
    "nowplaying",
    "spotify-api",
    "nextjs"
  ],
  "draft": false,
  "summary": "Retrieve a Spotify access token to display the currently playing track on your website or application.",
  "body": {
    "raw": "\nIf you want to display your Spotify now playing track on your website, you need to get a token from Spotify.\nThis token will be used to get the track information from Spotify API.\n\n## Create a Spotify app\n\nFirst, you need to create a Spotify app to get the credentials in order to generate the token.\n\n- Go to [Spotify for Developers](https://developer.spotify.com/dashboard/applications) and login with your Spotify account.\n- Click on **Create app** button.\n- Fill the form and with the app name and description.\n- Add a redirect URI. This URI will be used to redirect to your local app after the authentication. For example, `http://localhost:3434`.\n- Click on **Create** button.\n\nAfter creating the app, navigate to the **Settings** page and copy the `Client ID` and `Client secret`.\nWe will use these values in the next step.\n\n![Spotify App](/static/images/spotify-app.png)\n\n## Authentication\n\nSince we only need to generate the token once, we will use the [Authorization Code Flow](https://developer.spotify.com/documentation/web-api/concepts/authorization#authorization-code-flow).\nNavigate to the following URL and replace the `CLIENT_ID` with your Spotify app `Client ID`:\n\n```bash\nhttps://accounts.spotify.com/authorize?client_id=CLIENT_ID&response_type=code&redirect_uri=http://localhost:3434&scope=user-read-currently-playing\n```\n\nRemember to use the same redirect URI that you added to your Spotify app.\nIn my case, it's `http://localhost:3434`.\n\n![Spotify auth](/static/images/spotify-auth.png)\n\nAfter the authentication process, you will be redirected to the redirect URI with a `code` query parameter.\nThe redirect URI will look like this:\n\n```bash\nhttp://localhost:3434/?code=a1b2c...i9j0\n```\n\n![Spotify code](/static/images/spotify-code.png)\n\nSave this `code` value, we will use it in the next step.\n\nNext step is to send a POST request to the Spotify API to get the token. We'll simply open a new tab in the browser and send the request using the `fetch` API in the browser developer tools.\n\nRun this code in the **Console** tab of the browser developer tools:\n\n```js:spotify.js {3,18} showLineNumbers\nlet data = {\n  grant_type: 'authorization_code',\n  code: 'AQB....GemX',\n  redirect_uri: 'http://localhost:3434',\n}\n\nlet formData = []\nfor (let prop in data) {\n  let encodedKey = encodeURIComponent(prop)\n  let encodedValue = encodeURIComponent(data[prop])\n  formData.push(encodedKey + '=' + encodedValue)\n}\nformData = formData.join('&')\n\nfetch('https://accounts.spotify.com/api/token', {\n  method: 'POST',\n  headers: {\n    Authorization: 'Basic <base64 encoded client_id:client_secret>',\n    'Content-Type': 'application/x-www-form-urlencoded',\n  },\n  body: formData,\n})\n```\n\nReplace the code in line 3 with the `code` value that you saved in the previous step.\n\nReplace the `<base64 encoded client_id:client_secret>` in line 18 with the base64 encoded value of your Spotify app `Client ID` and `Client secret`.\nYou can use this [online tool](https://www.base64encode.org/) to encode the value.\n\n![Base64 encode tool](/static/images/spotify-base64-encode.png)\n\nThe value format should be `client_id:client_secret`\n\nThe request will return a response containing a `refresh_token`, this token is valid indefinitely unless you revoke it or you change the password of your Spotify account.\n\n## Querying the nowplaying track\n\nNow that we have the token, we can use it to fetch the now playing track from Spotify API.\nUse this code to fetch the now playing track in your node server:\n\n```js:spotify.js showLineNumbers\nimport fetch from 'isomorphic-unfetch'\n\nlet SPOTIFY_TOKEN_API = `https://accounts.spotify.com/api/token`\nlet SPOTIFY_NOW_PLAYING_API = `https://api.spotify.com/v1/me/player/currently-playing`\nlet SPOTIFY_TOP_TRACKS_API = `https://api.spotify.com/v1/me/top/tracks`\n\nlet {\n  SPOTIFY_CLIENT_ID: client_id,\n  SPOTIFY_CLIENT_SECRET: client_secret,\n  SPOTIFY_REFRESH_TOKEN: refresh_token,\n} = process.env\n\nlet basic = Buffer.from(`${client_id}:${client_secret}`).toString('base64')\n\nasync function getAccessToken() {\n  let response = await fetch(SPOTIFY_TOKEN_API, {\n    method: 'POST',\n    headers: {\n      Authorization: `Basic ${basic}`,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: new URLSearchParams({\n      grant_type: 'refresh_token',\n      refresh_token,\n    }),\n  })\n\n  return response.json()\n}\n\nexport async function getNowPlaying() {\n  let { access_token } = await getAccessToken()\n  let url = new URL(SPOTIFY_NOW_PLAYING_API)\n  url.searchParams.append('additional_types', 'track,episode')\n\n  return fetch(url.toString(), {\n    headers: {\n      Authorization: `Bearer ${access_token}`,\n    },\n  })\n}\n```\n\nRemember to add the required environment variables to your `.env` file.\n\n```bash:.env showLineNumbers\nSPOTIFY_CLIENT_ID=your_spotify_client_id\nSPOTIFY_CLIENT_SECRET=your_spotify_client_secret\nSPOTIFY_REFRESH_TOKEN=your_spotify_refresh_token\n```\n\nThat's it! Now you can use the `getNowPlaying` function to fetch the now playing track from Spotify API.\n\nHappy playing! <Twemoji emoji=\"clinking-beer-mugs\" />\n",
    "code": "var Component=(()=>{var g=Object.create;var n=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var D=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),C=(e,i)=>{for(var s in i)n(e,s,{get:i[s],enumerable:!0})},d=(e,i,s,l)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let t of y(i))!B.call(e,t)&&t!==s&&n(e,t,{get:()=>i[t],enumerable:!(l=o(i,t))||l.enumerable});return e};var F=(e,i,s)=>(s=e!=null?g(A(e)):{},d(i||!e||!e.__esModule?n(s,\"default\",{value:e,enumerable:!0}):s,e)),u=e=>d(n({},\"__esModule\",{value:!0}),e);var k=D((b,r)=>{r.exports=_jsx_runtime});var m={};C(m,{default:()=>p,frontmatter:()=>f});var h=F(k()),f={heading:\"Display Spotify currently playing track\",title:\"How to work with Spotify's API to display currently playing track on a website?\",date:\"2023-04-06\",icon:\"Spotify\",draft:!1,summary:\"Retrieve a Spotify access token to display the currently playing track on your website or application.\",tags:[\"spotify\",\"nowplaying\",\"spotify-api\",\"nextjs\"]};function c(e){let i={a:\"a\",code:\"code\",div:\"div\",figure:\"figure\",h2:\"h2\",li:\"li\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...e.components},{CodeTitle:s,Image:l,Twemoji:t}=i;return s||a(\"CodeTitle\",!0),l||a(\"Image\",!0),t||a(\"Twemoji\",!0),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.p,{children:\"If you want to display your Spotify now playing track on your website, you need to get a token from Spotify. This token will be used to get the track information from Spotify API.\"}),(0,h.jsxs)(i.h2,{className:\"content-header\",id:\"create-a-spotify-app\",children:[(0,h.jsx)(i.a,{href:\"#create-a-spotify-app\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.span,{className:\"content-header-link\",children:(0,h.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,h.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,h.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Create a Spotify app\"]}),(0,h.jsx)(i.p,{children:\"First, you need to create a Spotify app to get the credentials in order to generate the token.\"}),(0,h.jsxs)(i.ul,{children:[(0,h.jsxs)(i.li,{children:[\"Go to \",(0,h.jsx)(i.a,{href:\"https://developer.spotify.com/dashboard/applications\",children:\"Spotify for Developers\"}),\" and login with your Spotify account.\"]}),(0,h.jsxs)(i.li,{children:[\"Click on \",(0,h.jsx)(i.strong,{children:\"Create app\"}),\" button.\"]}),(0,h.jsx)(i.li,{children:\"Fill the form and with the app name and description.\"}),(0,h.jsxs)(i.li,{children:[\"Add a redirect URI. This URI will be used to redirect to your local app after the authentication. For example, \",(0,h.jsx)(i.code,{children:\"http://localhost:3434\"}),\".\"]}),(0,h.jsxs)(i.li,{children:[\"Click on \",(0,h.jsx)(i.strong,{children:\"Create\"}),\" button.\"]})]}),(0,h.jsxs)(i.p,{children:[\"After creating the app, navigate to the \",(0,h.jsx)(i.strong,{children:\"Settings\"}),\" page and copy the \",(0,h.jsx)(i.code,{children:\"Client ID\"}),\" and \",(0,h.jsx)(i.code,{children:\"Client secret\"}),\". We will use these values in the next step.\"]}),(0,h.jsx)(i.div,{children:(0,h.jsx)(l,{alt:\"Spotify App\",src:\"/static/images/spotify-app.png\",width:\"2672\",height:\"1527\"})}),(0,h.jsxs)(i.h2,{className:\"content-header\",id:\"authentication\",children:[(0,h.jsx)(i.a,{href:\"#authentication\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.span,{className:\"content-header-link\",children:(0,h.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,h.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,h.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Authentication\"]}),(0,h.jsxs)(i.p,{children:[\"Since we only need to generate the token once, we will use the \",(0,h.jsx)(i.a,{href:\"https://developer.spotify.com/documentation/web-api/concepts/authorization#authorization-code-flow\",children:\"Authorization Code Flow\"}),\". Navigate to the following URL and replace the \",(0,h.jsx)(i.code,{children:\"CLIENT_ID\"}),\" with your Spotify app \",(0,h.jsx)(i.code,{children:\"Client ID\"}),\":\"]}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsx)(i.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#268BD2\"},children:\"https://accounts.spotify.com/authorize?client_id\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"=CLIENT_ID\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"&\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"response_type\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"code\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"&\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"redirect_uri\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"http://localhost:3434\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"&\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"scope\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"user-read-currently-playing\"})]})})})}),(0,h.jsxs)(i.p,{children:[\"Remember to use the same redirect URI that you added to your Spotify app. In my case, it's \",(0,h.jsx)(i.code,{children:\"http://localhost:3434\"}),\".\"]}),(0,h.jsx)(i.div,{children:(0,h.jsx)(l,{alt:\"Spotify auth\",src:\"/static/images/spotify-auth.png\",width:\"811\",height:\"1001\"})}),(0,h.jsxs)(i.p,{children:[\"After the authentication process, you will be redirected to the redirect URI with a \",(0,h.jsx)(i.code,{children:\"code\"}),\" query parameter. The redirect URI will look like this:\"]}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsx)(i.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#268BD2\"},children:\"http://localhost:3434/?code\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"=a1b2c.\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\".i9j0\"})]})})})}),(0,h.jsx)(i.div,{children:(0,h.jsx)(l,{alt:\"Spotify code\",src:\"/static/images/spotify-code.png\",width:\"529\",height:\"152\"})}),(0,h.jsxs)(i.p,{children:[\"Save this \",(0,h.jsx)(i.code,{children:\"code\"}),\" value, we will use it in the next step.\"]}),(0,h.jsxs)(i.p,{children:[\"Next step is to send a POST request to the Spotify API to get the token. We'll simply open a new tab in the browser and send the request using the \",(0,h.jsx)(i.code,{children:\"fetch\"}),\" API in the browser developer tools.\"]}),(0,h.jsxs)(i.p,{children:[\"Run this code in the \",(0,h.jsx)(i.strong,{children:\"Console\"}),\" tab of the browser developer tools:\"]}),(0,h.jsx)(s,{lang:\"js\",title:\"spotify.js\"}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  grant_type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'authorization_code'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  code: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'AQB....GemX'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  redirect_uri: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'http://localhost:3434'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" formData\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" []\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"for\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" prop\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" in\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" encodedKey\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" encodeURIComponent\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"prop\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" encodedValue\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" encodeURIComponent\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"[\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"prop\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"])\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  formData\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"push\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"encodedKey\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" +\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" '='\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" +\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" encodedValue\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"formData\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" formData\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"join\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'&'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"fetch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'https://accounts.spotify.com/api/token'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  method: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'POST'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  headers: {\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    Authorization: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'Basic <base64 encoded client_id:client_secret>'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"    'Content-Type'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'application/x-www-form-urlencoded'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  },\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  body: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"formData\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"})\"})})]})})}),(0,h.jsxs)(i.p,{children:[\"Replace the code in line 3 with the \",(0,h.jsx)(i.code,{children:\"code\"}),\" value that you saved in the previous step.\"]}),(0,h.jsxs)(i.p,{children:[\"Replace the \",(0,h.jsx)(i.code,{children:\"<base64 encoded client_id:client_secret>\"}),\" in line 18 with the base64 encoded value of your Spotify app \",(0,h.jsx)(i.code,{children:\"Client ID\"}),\" and \",(0,h.jsx)(i.code,{children:\"Client secret\"}),\". You can use this \",(0,h.jsx)(i.a,{href:\"https://www.base64encode.org/\",children:\"online tool\"}),\" to encode the value.\"]}),(0,h.jsx)(i.div,{children:(0,h.jsx)(l,{alt:\"Base64 encode tool\",src:\"/static/images/spotify-base64-encode.png\",width:\"612\",height:\"896\"})}),(0,h.jsxs)(i.p,{children:[\"The value format should be \",(0,h.jsx)(i.code,{children:\"client_id:client_secret\"})]}),(0,h.jsxs)(i.p,{children:[\"The request will return a response containing a \",(0,h.jsx)(i.code,{children:\"refresh_token\"}),\", this token is valid indefinitely unless you revoke it or you change the password of your Spotify account.\"]}),(0,h.jsxs)(i.h2,{className:\"content-header\",id:\"querying-the-nowplaying-track\",children:[(0,h.jsx)(i.a,{href:\"#querying-the-nowplaying-track\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.span,{className:\"content-header-link\",children:(0,h.jsxs)(i.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,h.jsx)(i.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,h.jsx)(i.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Querying the nowplaying track\"]}),(0,h.jsx)(i.p,{children:\"Now that we have the token, we can use it to fetch the now playing track from Spotify API. Use this code to fetch the now playing track in your node server:\"}),(0,h.jsx)(s,{lang:\"js\",title:\"spotify.js\"}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"import\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" from\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'isomorphic-unfetch'\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\" SPOTIFY_TOKEN_API\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" `https://accounts.spotify.com/api/token`\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\" SPOTIFY_NOW_PLAYING_API\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" `https://api.spotify.com/v1/me/player/currently-playing`\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\" SPOTIFY_TOP_TRACKS_API\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" `https://api.spotify.com/v1/me/top/tracks`\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"  SPOTIFY_CLIENT_ID\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"client_id\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"  SPOTIFY_CLIENT_SECRET\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"client_secret\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"  SPOTIFY_REFRESH_TOKEN\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"refresh_token\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"} \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" process\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"env\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" basic\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" Buffer\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"from\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`${\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"client_id\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}:${\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"client_secret\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\").\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"toString\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'base64'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"async\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" getAccessToken\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"() {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" response\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" await\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\"SPOTIFY_TOKEN_API\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    method: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'POST'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    headers: {\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      Authorization: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`Basic ${\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"basic\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"      'Content-Type'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\": \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'application/x-www-form-urlencoded'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    },\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    body: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"new\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" URLSearchParams\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      grant_type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'refresh_token'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      refresh_token\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    }),\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  })\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" response\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"json\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"export\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" async\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\" function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" getNowPlaying\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"() {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" { \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"access_token\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" } \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" await\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" getAccessToken\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" url\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" new\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" URL\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#268BD2\"},children:\"SPOTIFY_NOW_PLAYING_API\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  url\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"searchParams\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"append\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'additional_types'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'track,episode'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"url\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"toString\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(), {\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    headers: {\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      Authorization: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"`Bearer ${\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"access_token\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"}`\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\",\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    },\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  })\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,h.jsxs)(i.p,{children:[\"Remember to add the required environment variables to your \",(0,h.jsx)(i.code,{children:\".env\"}),\" file.\"]}),(0,h.jsx)(s,{lang:\"bash\",title:\".env\"}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"1\",children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"SPOTIFY_CLIENT_ID\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"your_spotify_client_id\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"SPOTIFY_CLIENT_SECRET\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"your_spotify_client_secret\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"SPOTIFY_REFRESH_TOKEN\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"your_spotify_refresh_token\"})]})]})})}),(0,h.jsxs)(i.p,{children:[\"That's it! Now you can use the \",(0,h.jsx)(i.code,{children:\"getNowPlaying\"}),\" function to fetch the now playing track from Spotify API.\"]}),(0,h.jsxs)(i.p,{children:[\"Happy playing! \",(0,h.jsx)(t,{emoji:\"clinking-beer-mugs\"})]})]})}function p(e={}){let{wrapper:i}=e.components||{};return i?(0,h.jsx)(i,{...e,children:(0,h.jsx)(c,{...e})}):c(e)}function a(e,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return u(m);})();\n;return Component;"
  },
  "_id": "snippets/using-spotify-api-to-display-currently-playing-track.mdx",
  "_raw": {
    "sourceFilePath": "snippets/using-spotify-api-to-display-currently-playing-track.mdx",
    "sourceFileName": "using-spotify-api-to-display-currently-playing-track.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/using-spotify-api-to-display-currently-playing-track"
  },
  "type": "Snippet",
  "readingTime": {
    "text": "4 min read",
    "minutes": 3.025,
    "time": 181500,
    "words": 605
  },
  "slug": "using-spotify-api-to-display-currently-playing-track",
  "path": "snippets/using-spotify-api-to-display-currently-playing-track",
  "filePath": "snippets/using-spotify-api-to-display-currently-playing-track.mdx",
  "toc": [
    {
      "value": "Create a Spotify app",
      "url": "#create-a-spotify-app",
      "depth": 2
    },
    {
      "value": "Authentication",
      "url": "#authentication",
      "depth": 2
    },
    {
      "value": "Querying the nowplaying track",
      "url": "#querying-the-nowplaying-track",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "CodeSnippet",
    "headline": "How to work with Spotify's API to display currently playing track on a website?",
    "datePublished": "2023-04-06T00:00:00.000Z",
    "dateModified": "2023-04-06T00:00:00.000Z",
    "description": "Retrieve a Spotify access token to display the currently playing track on your website or application.",
    "image": "/static/images/twitter-card.jpeg",
    "url": "https://www.rustyyow.com/snippets/using-spotify-api-to-display-currently-playing-track"
  }
}