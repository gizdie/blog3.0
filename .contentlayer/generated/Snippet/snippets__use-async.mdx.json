{
  "heading": "Use an async effect",
  "title": "A custom hooks to use an async effect",
  "icon": "React",
  "date": "2022-02-22T00:00:00.000Z",
  "tags": [
    "react",
    "hooks",
    "async",
    "effect"
  ],
  "draft": false,
  "summary": "Build a custom React hook to use asynchronous effects inside functional components.",
  "body": {
    "raw": "\nCustom hooks to use an async effect\n\n```js showLineNumbers\nfunction useAsync(asyncCallback) {\n  let [state, dispatch] = React.useReducer(asyncReducer)\n\n  React.useEffect(() => {\n    let promise = asyncCallback()\n    if (!promise) return\n\n    dispatch({ type: 'pending' })\n    promise\n      .then((data) => dispatch({ type: 'resolved', data }))\n      .catch((error) => dispatch({ type: 'rejected', error }))\n  }, [asyncCallback])\n\n  return state\n}\n```\n\nUsage:\n\n```js showLineNumbers\nfunction Component({ input }) {\n  // Remember to wrap the async job in a useCallback\n  let asyncCallback = React.useCallback(() => {\n    if (!input) return\n\n    // Run the async effect (fetch is an example)\n    return fetch(input)\n  }, [input])\n\n  let { status, data, error } = useAsync(asyncCallback)\n\n  switch (status) {\n    case 'idle':\n      return 'Waiting for the async to trigger'\n    case 'pending':\n      return 'Pending UI'\n    case 'rejected':\n      throw error\n    case 'resolved':\n      return 'Data UI'\n    default:\n      throw new Error('This should be impossible')\n  }\n}\n```\n\nHow to clean the side effect (the async job start but then the component unmounted) ? - `useSafeDispatch` !\n\n```js showLineNumbers\nfunction useSafeDispatch(dispatch) {\n  let mountedRef = React.useRef(false)\n  React.useEffect(() => {\n    mountedRef.current = true\n    return () => {\n      mountedRef.current = false\n    }\n  }, [])\n\n  return React.useCallback(\n    (...args) => {\n      if (mountedRef.current) {\n        dispatch(...args)\n      }\n    },\n    [dispatch]\n  )\n}\n```\n\nNow change the `useAsync` function:\n\n```js showLineNumbers\nfunction useAsync(asyncCallback) {\n  let [state, unsafeDispatch] = React.useReducer(asyncReducer)\n  let dispatch = useSafeDispatch(unsafeDispatch)\n\n  React.useEffect(() => {\n    let promise = asyncCallback()\n    if (!promise) return\n\n    dispatch({ type: 'pending' })\n    promise\n      .then((data) => dispatch({ type: 'resolved', data }))\n      .catch((error) => dispatch({ type: 'rejected', error }))\n  }, [asyncCallback])\n\n  return state\n}\n```\n\nCheers <Twemoji emoji=\"clinking-beer-mugs\" />\n",
    "code": "var Component=(()=>{var B=Object.create;var n=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var D=(s,i)=>()=>(i||s((i={exports:{}}).exports,i),i.exports),C=(s,i)=>{for(var l in i)n(s,l,{get:i[l],enumerable:!0})},t=(s,i,l,a)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let e of p(i))!y.call(s,e)&&e!==l&&n(s,e,{get:()=>i[e],enumerable:!(a=g(i,e))||a.enumerable});return s};var o=(s,i,l)=>(l=s!=null?B(A(s)):{},t(i||!s||!s.__esModule?n(l,\"default\",{value:s,enumerable:!0}):l,s)),F=s=>t(n({},\"__esModule\",{value:!0}),s);var d=D((w,k)=>{k.exports=_jsx_runtime});var m={};C(m,{default:()=>c,frontmatter:()=>f});var h=o(d()),f={heading:\"Use an async effect\",title:\"A custom hooks to use an async effect\",date:\"2022-02-22\",icon:\"React\",draft:!1,summary:\"Build a custom React hook to use asynchronous effects inside functional components.\",tags:[\"react\",\"hooks\",\"async\",\"effect\"]};function r(s){let i={code:\"code\",figure:\"figure\",p:\"p\",pre:\"pre\",span:\"span\",...s.components},{Twemoji:l}=i;return l||u(\"Twemoji\",!0),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.p,{children:\"Custom hooks to use an async effect\"}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" useAsync\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"state\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"] \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useReducer\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"asyncReducer\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useEffect\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"    let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" promise\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    if\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"!\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"promise\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"return\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"    dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'pending'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" })\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"    promise\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      .\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"((\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'resolved'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }))\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      .\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"catch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"((\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'rejected'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }))\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }, [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"])\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" state\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,h.jsx)(i.p,{children:\"Usage:\"}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" Component\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"input\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }) {\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"  // Remember to wrap the async job in a useCallback\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    if\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"!\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"input\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"return\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#768390\",\"--shiki-dark-font-style\":\"inherit\",\"--shiki-light\":\"#93A1A1\",\"--shiki-light-font-style\":\"italic\"},children:\"    // Run the async effect (fetch is an example)\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" fetch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"input\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }, [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"input\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"])\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" { \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"status\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" } \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" useAsync\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  switch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"status\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    case\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'idle'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\":\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'Waiting for the async to trigger'\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    case\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'pending'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\":\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'Pending UI'\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    case\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'rejected'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\":\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      throw\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" error\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    case\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'resolved'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\":\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\" 'Data UI'\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    default\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\":\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      throw\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" new\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" Error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'This should be impossible'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,h.jsxs)(i.p,{children:[\"How to clean the side effect (the async job start but then the component unmounted) ? - \",(0,h.jsx)(i.code,{children:\"useSafeDispatch\"}),\" !\"]}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" useSafeDispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" mountedRef\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useRef\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#B58900\"},children:\"false\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useEffect\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"    mountedRef\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"current\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#B58900\"},children:\" true\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" () \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"      mountedRef\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"current\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#6CB6FF\",\"--shiki-light\":\"#B58900\"},children:\" false\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    }\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }, [])\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"...\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"args\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"      if\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"mountedRef\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"current\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"        dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"...\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"args\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      }\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    },\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"    [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"]\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  )\"})}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,h.jsxs)(i.p,{children:[\"Now change the \",(0,h.jsx)(i.code,{children:\"useAsync\"}),\" function:\"]}),(0,h.jsx)(i.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,h.jsx)(i.pre,{\"data-language\":\"js\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{\"--shiki-dark\":\"#adbac7\",\"--shiki-light\":\"#657B83\",\"--shiki-dark-bg\":\"#22272e\",\"--shiki-light-bg\":\"#FDF6E3\"},tabIndex:\"0\",children:(0,h.jsxs)(i.code,{\"data-language\":\"js\",\"data-line-numbers\":\"\",\"data-line-numbers-max-digits\":\"2\",\"data-theme\":\"github-dark-dimmed solarized-light\",style:{display:\"grid\"},children:[(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"function\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" useAsync\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"state\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"unsafeDispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"] \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"=\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useReducer\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"asyncReducer\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"  let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" useSafeDispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"unsafeDispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\")\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"  React\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\".\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"useEffect\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"(() \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" {\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"    let\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" promise\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\" =\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"()\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"    if\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" (\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"!\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"promise\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"return\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"    dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'pending'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" })\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"    promise\"})}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      .\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"then\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"((\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'resolved'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"data\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }))\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"      .\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\"catch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"((\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F69D50\",\"--shiki-light\":\"#657B83\"},children:\"error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\") \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-dark-font-weight\":\"inherit\",\"--shiki-light\":\"#586E75\",\"--shiki-light-font-weight\":\"bold\"},children:\"=>\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#DCBDFB\",\"--shiki-light\":\"#268BD2\"},children:\" dispatch\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"({ type: \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#96D0FF\",\"--shiki-light\":\"#2AA198\"},children:\"'rejected'\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\", \"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"error\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\" }))\"})]}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"  }, [\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\"asyncCallback\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"])\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,h.jsxs)(i.span,{\"data-line\":\"\",children:[(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#F47067\",\"--shiki-light\":\"#859900\"},children:\"  return\"}),(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#268BD2\"},children:\" state\"})]}),`\n`,(0,h.jsx)(i.span,{\"data-line\":\"\",children:(0,h.jsx)(i.span,{style:{\"--shiki-dark\":\"#ADBAC7\",\"--shiki-light\":\"#657B83\"},children:\"}\"})})]})})}),(0,h.jsxs)(i.p,{children:[\"Cheers \",(0,h.jsx)(l,{emoji:\"clinking-beer-mugs\"})]})]})}function c(s={}){let{wrapper:i}=s.components||{};return i?(0,h.jsx)(i,{...s,children:(0,h.jsx)(r,{...s})}):r(s)}function u(s,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return F(m);})();\n;return Component;"
  },
  "_id": "snippets/use-async.mdx",
  "_raw": {
    "sourceFilePath": "snippets/use-async.mdx",
    "sourceFileName": "use-async.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/use-async"
  },
  "type": "Snippet",
  "readingTime": {
    "text": "2 min read",
    "minutes": 1.265,
    "time": 75900,
    "words": 253
  },
  "slug": "use-async",
  "path": "snippets/use-async",
  "filePath": "snippets/use-async.mdx",
  "toc": [],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "CodeSnippet",
    "headline": "A custom hooks to use an async effect",
    "datePublished": "2022-02-22T00:00:00.000Z",
    "dateModified": "2022-02-22T00:00:00.000Z",
    "description": "Build a custom React hook to use asynchronous effects inside functional components.",
    "image": "/static/images/twitter-card.jpeg",
    "url": "https://www.rustyyow.com/snippets/use-async"
  }
}